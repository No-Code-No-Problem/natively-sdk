window.natively={isDebug:!1,min_app_version:"",app_version:"",injected:!1,observers:[],setDebug:function(isDebug){window.natively.isDebug=isDebug},notify:function(){window.natively.injected=!0;const observers=window.natively.observers;for(natively.isDebug&&console.log("[INFO] Notify observers: ",observers.length);observers.length>0;){const observer=observers.shift();observer()}},addObserver:function(fn){window.natively.injected?fn():(window.natively.isDebug&&console.log(`[DEBUG] addObserver: ${fn}`),window.natively.observers.push(fn))},trigger:function(respId,minVersion,callback,method,body){const isTestVersion=window.natively.isDebug;if(window.natively.injected)if(isTestVersion&&minVersion>window.natively.app_version)alert(`[ERROR] Please rebuild the app to use this functionality. App Version: ${window.natively.app_version}, feature version: ${minVersion}`);else{if(callback){let fullMethodName;fullMethodName=respId?method+"_response_"+respId:method+"_response",window[fullMethodName]=function(resp,err){$agent.response(),err.message&&isTestVersion?alert(`[ERROR] Error message: ${err.message}`):(isTestVersion&&console.log(`[DEBUG] Callback method: ${fullMethodName}, body: ${JSON.stringify(resp)}, respId: ${respId}`),callback(resp))},body?body.response_id=respId:body={response_id:respId}}isTestVersion&&console.log(`[DEBUG] Trigger method: ${method}, body: ${JSON.stringify(body)}`),$agent.trigger(method,body)}else window.natively.addObserver(()=>{window.natively.trigger(respId,minVersion,callback,method,body)})},shareImage(image_url){window.natively.trigger(void 0,0,void 0,"share_image",{url:image_url})},shareText(text){window.natively.trigger(void 0,0,void 0,"share_text",{text:text})},shareTextAndImage(text,image_url){window.natively.trigger(void 0,0,void 0,"share_text_and_image",{url:image_url,text:text})},shareFile(file_url){window.natively.trigger(void 0,2,void 0,"share_file",{url:file_url})},openExternalURL(url){window.natively.trigger(void 0,0,void 0,"open_link",{url:url})},openExternalAppIOS(url){window.natively.trigger(void 0,0,void 0,"open_app",{url:url})},openAppSettings(){window.natively.trigger(void 0,0,void 0,"open_appsettings")},showAppToast(type,text){const params={type:type,text:text};window.natively.trigger(void 0,0,void 0,"show_toast",params)},showAppBanner(type,title,description){const params={type:type,title:title,description:description};window.natively.trigger(void 0,0,void 0,"show_banner",params)},requestAppReview(){window.natively.trigger(void 0,0,void 0,"request_review")},setAppBackgroundColor(color){const params={color:color};window.natively.trigger(void 0,1,void 0,"app_background",params)},setAppProgressColor(color){const params={color:color};window.natively.trigger(void 0,1,void 0,"app_progress",params)},setAppSwipeNavigationIOS(toggle){const params={toggle:toggle};window.natively.trigger(void 0,1,void 0,"app_navigation",params)},setAppPullToRefresh(toggle){const params={toggle:toggle};window.natively.trigger(void 0,1,void 0,"app_pull",params)},setAppStatusBarStyleIOS(style){const params={style:style};window.natively.trigger(void 0,2,void 0,"status_bar_style",params)},async sendPushNotification(appId,payload,player_ids,isPreview){const filtered=player_ids.filter(id=>id.length>0),include_player_ids=[...new Set(filtered)];let notification={app_id:isPreview?"be83022a-1d08-45d0-a07a-0c3655666e17":appId,include_player_ids:include_player_ids};payload.template_id?notification.template_id=payload.template_id:(notification.headings={},notification.headings.en=payload.title||"Empty Title",notification.contents={},notification.contents.en=payload.message||"Empty Message",payload.subtitle&&(notification.subtitle={},notification.subtitle.en=payload.subtitle),payload.redirect_url&&(notification.url=payload.redirect_url));const options={method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(notification)};return await fetch("https://onesignal.com/api/v1/notifications",options)}},window.natively.addObserver(()=>window.natively.trigger(void 0,0,resp=>{window.natively.min_app_version=resp.minSDKVersion,window.natively.app_version=resp.sdkVersion},"app_info",{}));class NativelyInfo{constructor(){const id=generateID();this.getAppInfo=function(app_info_callback){window.natively.trigger(id,0,app_info_callback,"app_info")},this.connectivity=function(connectivity_callback){window.natively.trigger(void 0,0,connectivity_callback,"connectivity")}}}class NativelyNotifications{constructor(){const id=generateID();this.getOneSignalId=function(onesignal_playerid_callback){window.natively.trigger(id,0,onesignal_playerid_callback,"onesignal_playerid")},this.requestPermissionIOS=function(fallbackToSettings,push_register_callback){window.natively.trigger(id,0,push_register_callback,"push_register",{fallbackToSettings:fallbackToSettings})},this.getPermissionStatusIOS=function(push_permission_callback){window.natively.trigger(id,0,push_permission_callback,"push_permission")}}}class NativelyGeolocation{constructor(){const id=generateID();this.getUserGeolocation=function(distance,geolocation_callback){window.natively.trigger(id,0,geolocation_callback,"geolocation",{distance:distance})},this.requestPermission=function(geo_register_callback){window.natively.trigger(id,0,geo_register_callback,"geo_register")},this.getPermissionStatus=function(geo_permission_callback){window.natively.trigger(id,0,geo_permission_callback,"geo_permission")}}}class NativelyMessage{constructor(){const id=generateID();this.sendSMS=function(body,recipient,send_sms_callback){const params={};params.body=void 0===typeof body?"":body,params.recipient=void 0===typeof recipient?"":recipient,window.natively.trigger(id,0,send_sms_callback,"send_sms",params)},this.sendEmail=function(subject,body,recipient,send_email_callback){const params={};params.subject=void 0===typeof subject?"":subject,params.body=void 0===typeof body?"":body,params.recipient=void 0===typeof recipient?"":recipient,window.natively.trigger(id,0,send_email_callback,"send_email",params)}}}class NativelyStorage{constructor(){const id=generateID();this.setStorageValue=function(key,value){window.natively.trigger(id,0,void 0,"set_storage_value",{key:key,value:value})},this.getStorageValue=function(key,get_storage_value_callback){window.natively.trigger(id,0,get_storage_value_callback,"get_storage_value",{key:key})},this.removeStorageValue=function(key){window.natively.trigger(id,0,void 0,"remove_storage_value",{key:key})},this.resetStorage=function(){window.natively.trigger(id,0,void 0,"reset_storage")}}}class NativelyBiometrics{constructor(allowPass){this.allowPass=allowPass;const id=generateID();this.checkBiometricsSupport=function(biometrics_support_callback){window.natively.trigger(id,0,biometrics_support_callback,"biometrics_support",{allowPass:allowPass})},this.checkCredentials=function(biometrics_has_credentials_callback){window.natively.trigger(id,0,biometrics_has_credentials_callback,"biometrics_has_credentials")},this.verifyUserIdentify=function(biometrics_verify_callback){window.natively.trigger(id,0,biometrics_verify_callback,"biometrics_verify",{allowPass:allowPass})},this.getUserCredentials=function(biometrics_auth_callback){window.natively.trigger(id,0,biometrics_auth_callback,"biometrics_auth",{allowPass:allowPass})},this.removeUserCredentials=function(biometrics_remove_credentials_callback){window.natively.trigger(id,0,biometrics_remove_credentials_callback,"biometrics_remove_credentials")},this.saveUserCredentials=function(login,password,biometrics_auth_callback){window.natively.trigger(id,0,biometrics_auth_callback,"biometrics_auth",{allowPass:allowPass,login:login,password:password})}}}class NativelyDatePicker{constructor(){const id=generateID();this.showDatePicker=function(title,description,type,style,datepicker_callback){let params={};params.type=void 0===typeof type?"DATE":type,params.style=void 0===typeof style?"LIGHT":style,params.title=void 0===typeof title?"":title,params.description=void 0===typeof description?"":description,window.natively.trigger(id,0,datepicker_callback,"datepicker",params)}}}class NativelyCamera{constructor(){const id=generateID();this.showCamera=function(type,quality,open_camera_callback){let params={};params.type=void 0===typeof type?"photo":type,params.quality=void 0===typeof quality?"high":quality,window.natively.trigger(id,2,open_camera_callback,"open_camera",params)}}}class NativelyScanner{constructor(){const id=generateID();this.showScanner=function(open_scanner_callback){window.natively.trigger(id,2,open_scanner_callback,"open_scanner",{})}}}class NativelyPurchases{constructor(){const id=generateID();this.purchaseIOS=function(productId,inapp_purchase_callback){window.natively.trigger(id,3,inapp_purchase_callback,"inapp_purchase",{productId:productId})},this.purchaseAndroid=function(productType,productId,offerTag,inapp_purchase_callback){const tag=void 0===typeof offerTag?"":offerTag;let params={productId:productId,productType:productType,offerTag:tag};window.natively.trigger(id,3,inapp_purchase_callback,"inapp_purchase",params)}}}class NativelyContacts{constructor(){const id=generateID();this.getAllContacts=function(contacts_all_callback){window.natively.trigger(id,3,contacts_all_callback,"contacts_all",{})},this.createContact=function(firstName,lastName,email,phone,contacts_save_callback){let params={firstName:firstName};params.lastName=void 0===typeof lastName?"":lastName,params.email=void 0===typeof email?"":email,params.phone=void 0===typeof phone?"":phone,window.natively.trigger(id,3,contacts_save_callback,"contacts_save",params)}}}function generateID(){return Date.now().toString(36)+Math.random().toString(36).substring(2)}